!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.OdoShare=t()}(this,function(){"use strict";var e={BASE:"http://www.facebook.com/sharer.php",params:{u:{friendly:"url",parse:encodeURIComponent,default:window.location.href}}};function t(e){return"string"!=typeof e&&(e=e.join()),encodeURIComponent(e)}function n(e,t){return"string"==typeof e&&(e=e.replace(", ",",").split(",")),e=e.map(function(e){return e.replace(t,"")}).join(),encodeURIComponent(e)}var r={BASE:"https://twitter.com/intent/tweet",params:{url:{friendly:"url",parse:encodeURIComponent,default:window.location.href},via:{friendly:"via",parse:function(e){return encodeURIComponent(e.replace("@",""))}},text:{friendly:"text",parse:encodeURIComponent},related:{friendly:"recommend",parse:function(e){return n(e,"@")}},lang:{friendly:"language",parse:encodeURIComponent,default:"en"},counturl:{friendly:"resolvesTo",parse:encodeURIComponent},hashtags:{friendly:"hashtags",parse:function(e){return n(e,"#")}}}},o={BASE:"https://plus.google.com/share",features:"width=600,height=460,menubar=no,location=no,status=no",params:{url:{friendly:"url",parse:encodeURIComponent,default:window.location.href}}},i={BASE:"https://www.tumblr.com/widgets/share/tool",params:{url:{friendly:"url",parse:encodeURI,default:window.location.href},title:{friendly:"title",parse:encodeURI,default:document.title},description:{friendly:"description",parse:encodeURI}}},a={BASE:"http://www.linkedin.com/shareArticle",features:"width=520,height=570,toolbar=0,location=0,status=0,scrollbars=yes",params:{mini:{friendly:"mini",default:!0},ro:{friendly:"ro",default:!1},title:{friendly:"title",parse:encodeURIComponent,default:document.title},url:{friendly:"url",parse:encodeURIComponent,default:window.location.href}}},s={BASE:"mailto:",params:{to:{friendly:"to",parse:t},cc:{friendly:"cc",parse:t},bcc:{friendly:"bcc",parse:t},subject:{friendly:"subject",parse:encodeURIComponent,default:document.title},body:{friendly:"body",parse:encodeURIComponent,default:window.location.href}}},l=Object.freeze({facebook:e,twitter:r,googleplus:o,tumblr:i,linkedin:a,email:s}),u=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},c=function(){},p=function(){function e(){u(this,e),this.ClassName={BASE:"odo-share"},this.services=l,this.shares=[],this._registerShareButtons()}return e.prototype._registerShareButtons=function(){this.add(Array.from(document.querySelectorAll("."+this.ClassName.BASE),function(e){return{element:e}}))},e.prototype._normalizeOption=function(e){return e&&1===e.nodeType?{element:e}:e&&e.element?e:null},e.prototype._normalizeOptions=function(e){return(Array.isArray(e)?e.map(this._normalizeOption,this):[this._normalizeOption(e)]).filter(function(e){return!!e})},e.prototype.add=function(e){var t=this,n=[];return this._normalizeOptions(e).forEach(function(e){e.listener=function(n){n.preventDefault(),t.share(e)},e.element.addEventListener("click",e.listener),t.shares.push(e),n.push(e)}),n},e.prototype._performShare=function(t,n,r){var o=this,i=t.before.call(this,n),a=function(i){var a=void 0,s=void 0,l=n;if(void 0!==i&&null!==i){if(!1===i)return;s="data"in i?Object.assign(t,i):Object.assign(t,{data:i}),l=e._parseInput(s,r)}r===o.services.email?o._navigate(l.url):a=o._open(l.url,l.name,r.Features),t.after.call(o,l,a)};i&&i.then?i.then(a):a(i)},e.prototype._getService=function(e){var t=e.service||e.element&&e.element.getAttribute("data-service");if(this.services[t])return this.services[t]},e._parseInput=function(t,n){var r=e._parseParamsFromInput(t,n),o=e._getQueryString(r);return{params:r,queryString:o,url:n.BASE+o,name:"ShareWindow"}},e._parseParamsFromInput=function(e,t){var n=e.element?e.element.dataset:{},r=e.data,o={};return Object.keys(t.params).forEach(function(e){var i=t.params[e],a=i.friendly,s=null;a in r?s=r[a]:a in n?s=n[a]:i.default&&(s=i.default),s&&(o[e]=(i.parse?i.parse(s):s).toString())}),o},e._getQueryString=function(e){var t="";return e.to&&(t=e.to,delete e.to),t+"?"+Object.keys(e).map(function(t){return t+"="+e[t]}).join("&")},e.prototype._open=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return window.open(e,t,n)},e.prototype._navigate=function(e){window.location.assign(e)},e.prototype.share=function(t){var n=Object.assign({},e.Options,t),r=this._getService(n);if(!r)return!1;var o=e._parseInput(n,r);return this._performShare(n,o,r),!0},e.prototype.dispose=function(e){for(var t=0;t<this.shares.length;t++){var n=this.shares[t];if(n.element===e)return n.element.removeEventListener("click",n.listener),this.shares.splice(t,1).length}},e}();return p.Options={data:{},before:c,after:c},new p});
//# sourceMappingURL=odo-share.min.js.map
