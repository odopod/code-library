{"version":3,"file":"odo-expandable.js","sources":["../src/settings.js","../src/expandable-item.js","../src/expandable-group.js","../src/expandable-accordion.js","../src/expandable.js"],"sourcesContent":["export default {\n  ClassName: {\n    TRIGGER_OPEN: 'odo-expandable__trigger--open',\n    TARGET_OPEN: 'odo-expandable__target--open',\n  },\n  Attribute: {\n    TRIGGER: 'data-expandable-trigger',\n    TARGET: 'data-expandable-target',\n    GROUP: 'data-expandable-group',\n    ANIMATED: 'data-expandable-animated',\n  },\n  Defaults: {\n    groupedItem: false,\n  },\n};\n","/**\n * @fileoverview An basic, expandable component that has both a trigger\n * and a target to open.\n *\n * @author Matt Zaso\n */\nimport Settings from './settings';\n\nclass ExpandableItem {\n  constructor(id, options = {}) {\n    /** @type {string} */\n    this.id = id;\n\n    /**\n     * Override any defaults with the given options.\n     * @type {Object}\n     */\n    this.options = Object.assign({}, Settings.Defaults, options);\n\n    /** @type {Element} */\n    this.trigger = document.body.querySelector(`[${Settings.Attribute.TRIGGER}=\"${id}\"]`);\n\n    /** @type {Element} */\n    this.target = document.body.querySelector(`[${Settings.Attribute.TARGET}=\"${id}\"]`);\n\n    this._setA11yAttributes();\n\n    if (!this.options.groupedItem) {\n      this._onTriggerClick = this._triggerClickHandler.bind(this);\n      document.body.addEventListener('click', this._onTriggerClick);\n    }\n  }\n\n  /**\n   * Handler for clicks on the trigger.\n   * @param {Event} evt Event object.\n   * @private\n   */\n  _triggerClickHandler(evt) {\n    evt.preventDefault();\n    const closest = evt.target.closest(`[${Settings.Attribute.TRIGGER}]`);\n\n    if (closest === this.trigger) {\n      this.toggle();\n    }\n  }\n\n  /**\n   * Sets the appropriate ARIA attributes for a11y.\n   * @private\n   */\n  _setA11yAttributes() {\n    const elementId = `expandable-${this.id}`;\n\n    this.trigger.setAttribute('aria-describedby', elementId);\n    this.target.setAttribute('id', elementId);\n    this.trigger.setAttribute('aria-expanded', this.isOpen.toString());\n    this.trigger.setAttribute('aria-controls', elementId);\n    this.target.setAttribute('aria-labelledby', elementId);\n    this.target.setAttribute('aria-hidden', (!this.isOpen).toString());\n  }\n\n  /**\n   * Removes the ARIA attributes assigned on instantiation.\n   * @private\n   */\n  _removeA11yAttributes() {\n    this.trigger.removeAttribute('aria-describedby');\n    this.target.removeAttribute('id');\n    this.trigger.removeAttribute('aria-expanded');\n    this.target.removeAttribute('aria-labelledby');\n    this.target.removeAttribute('aria-hidden');\n  }\n\n  /**\n   * Toggles the expandable's state (open/closed).\n   */\n  toggle() {\n    if (this.isOpen) {\n      this.close();\n    } else {\n      this.open();\n    }\n  }\n\n  /**\n   * Opens the expandable.\n   */\n  open() {\n    this.target.classList.add(Settings.ClassName.TARGET_OPEN);\n    this.trigger.classList.add(Settings.ClassName.TRIGGER_OPEN);\n    this.trigger.setAttribute('aria-expanded', 'true');\n    this.target.setAttribute('aria-hidden', 'false');\n  }\n\n  /**\n   * Closes the expandable.\n   */\n  close() {\n    this.target.classList.remove(Settings.ClassName.TARGET_OPEN);\n    this.trigger.classList.remove(Settings.ClassName.TRIGGER_OPEN);\n    this.trigger.setAttribute('aria-expanded', 'false');\n    this.target.setAttribute('aria-hidden', 'true');\n  }\n\n  get isOpen() {\n    return this.target.classList.contains(Settings.ClassName.TARGET_OPEN);\n  }\n\n  /**\n   * Dispose this instance and its handlers.\n   */\n  dispose() {\n    if (!this.options.groupedItem) {\n      document.body.removeEventListener('click', this._onTriggerClick);\n    }\n\n    this._removeA11yAttributes();\n  }\n}\n\nObject.assign(ExpandableItem, Settings);\n\nexport default ExpandableItem;\n","/**\n * @fileoverview A wrapper for multiple Expandable elements that will\n * allow them to operate coherently in an accordion type fashion.\n *\n * @author Matt Zaso\n */\nimport Settings from './settings';\nimport ExpandableItem from './expandable-item';\n\nclass ExpandableGroup {\n  constructor(elements) {\n    /** @type {Array.<!Element>} */\n    this._elements = elements;\n\n    /**\n     * @type {Array.<!ExpandableItem>}\n     * @protected\n     */\n    this.expandables = elements.map(trigger => new ExpandableItem(\n      trigger.getAttribute(Settings.Attribute.TRIGGER),\n      { groupedItem: true },\n    ));\n\n    this._onClick = this._onClickHandler.bind(this);\n    document.body.addEventListener('click', this._onClick);\n  }\n\n  /**\n   * Handler for clicks on the trigger.\n   * @param {MouseEvent} evt Event object.\n   * @private\n   */\n  _onClickHandler(evt) {\n    evt.preventDefault();\n    const closest = evt.target.closest(`[${Settings.Attribute.TRIGGER}]`);\n\n    if (this._elements.includes(closest)) {\n      this.toggleVisibility(closest.getAttribute(Settings.Attribute.TRIGGER));\n    }\n  }\n\n  /**\n   * Will iterate over all grouped items and toggle the selected one while collapsing all others.\n   * @param {number} selectedId The ID of the selected target to expand.\n   * @private\n   */\n  toggleVisibility(selectedId) {\n    this.expandables.forEach((expandable) => {\n      if (expandable.id === selectedId) {\n        expandable.toggle();\n      } else {\n        expandable.close();\n      }\n    });\n  }\n\n  /**\n   * Dispose this instance and its handlers. Will also dispose all child\n   * instances.\n   * @public\n   */\n  dispose() {\n    document.body.removeEventListener('click', this._onTriggerClick);\n    this.expandables.forEach(item => item.dispose());\n  }\n}\n\nObject.assign(ExpandableGroup, Settings);\n\nexport default ExpandableGroup;\n","/**\n * @fileoverview A subclass of ExpandableGroup which includes some additional\n * features like scrolling and collapsing animations.\n *\n * @author Matt Zaso\n */\nimport { scrollTo } from '@odopod/odo-helpers';\nimport OdoWindowEvents from '@odopod/odo-window-events';\nimport ExpandableGroup from './expandable-group';\n\nclass ExpandableAccordion extends ExpandableGroup {\n  constructor(elements) {\n    super(elements);\n\n    /**\n     * @type {{item: number, offset: number}} Object A map of the expandable offsets.\n     */\n    this._expandableOffsets = null;\n\n    this._saveOffsets();\n\n    // Set the initial value of each element based on its state.\n    this.expandables.forEach(item => this._setHeight(item, item.isOpen));\n\n    // A resize handler for when the DOM updates.\n    this._resizeId = OdoWindowEvents.onResize(this._handleResize.bind(this));\n  }\n\n  /**\n   * Called by OdoWindowEvents when the browser is resized. Allows us to update\n   * our saved offsets and animate to their new positions.\n   *\n   * @private\n   */\n  _handleResize() {\n    this._saveOffsets();\n    this.expandables.forEach(item => this._setHeight(item, item.isOpen));\n  }\n\n  /**\n   * When an item is clicked, we animate the accordion.\n   *\n   * @override\n   */\n  toggleVisibility(selectedId) {\n    this._scrollToSelected(selectedId);\n    this.expandables.forEach(item => this._animateHeight(item, item.id === selectedId));\n    super.toggleVisibility(selectedId);\n  }\n\n  /**\n   * On load and any other time the DOM updates, this function will save the offsets\n   * of each accordion item into an object so we don't have to read the DOM every time.\n   *\n   * @private\n   */\n  _saveOffsets() {\n    const scrollY = window.pageYOffset;\n    const containerOffset = scrollY + this.expandables[0].trigger.getBoundingClientRect().top;\n    this._expandableOffsets = this.expandables.map((el, i) => {\n      const offset = containerOffset + (i * el.target.firstElementChild.offsetHeight);\n      return { id: el.id, offset };\n    });\n  }\n\n  /**\n   * When called we will check the accordion's position in the viewport and scroll\n   * the user into view if needed.\n   *\n   * @param {number} targetId The id of the ExpandableItem that was clicked.\n   * @private\n   */\n  _scrollToSelected(targetId) {\n    const viewportTop = window.pageYOffset;\n    const viewportBottom = viewportTop + window.innerHeight;\n    const item = this._expandableOffsets.find(item => item.id === targetId);\n    const itemOffset = item.offset;\n    const isOutOfView = itemOffset < viewportTop || itemOffset > viewportBottom;\n    if (isOutOfView) {\n      scrollTo(itemOffset, 300);\n    }\n  }\n\n  /**\n   * Sets the height of a given Expandable item.\n   *\n   * @param {Expandable} expandable The Expandable instance to modify.\n   * @param {boolean} setToOpen Whether we setting the Expandable to it's open state.\n   */\n  _setHeight(expandable, setToOpen) {\n    const contentHeight = setToOpen ? expandable.target.firstElementChild.offsetHeight : 0;\n    expandable.target.style.height = `${contentHeight}px`;\n  }\n\n  /**\n   * Called if we need to alter the Expandable state. Only does so if either the same\n   * Expandable that is open is clicked or another one was clicked and this one needs\n   * to be closed.\n   *\n   * @param {Expandable} expandable The expandable to test and potentially alter.\n   * @param {boolean} isTarget Whether or not the current expandable was the one clicked.\n   */\n  _animateHeight(expandable, isTarget) {\n    if (isTarget || expandable.isOpen) {\n      this._setHeight(expandable, !expandable.isOpen);\n    }\n  }\n\n  /**\n   * Remove the resize handler and dispose.\n   *\n   * @override\n   */\n  dispose() {\n    super.dispose();\n    OdoWindowEvents.remove(this._resizeId);\n  }\n}\n\nexport default ExpandableAccordion;\n","import Settings from './settings';\nimport ExpandableGroup from './expandable-group';\nimport ExpandableItem from './expandable-item';\nimport ExpandableAccordion from './expandable-accordion';\n\n/**\n * Instantiates all instances of the expandable. Groups are instantiated separate from\n * Expandables and require different parameters. This helper chunks out and groups the\n * grouped expandables before instantiating all of them.\n *\n * @return {Array.<Expandable, ExpandableGroup>} all instances of both types.\n * @public\n */\nexport function initializeAll() {\n  const elements = Array.from(document.querySelectorAll(`[${Settings.Attribute.TRIGGER}]`));\n\n  const single = [];\n  const groups = [];\n  const groupIds = [];\n\n  elements.forEach((item) => {\n    const groupId = item.getAttribute(Settings.Attribute.GROUP);\n    if (groupId) {\n      if (!groupIds.includes(groupId)) {\n        groups.push(elements.filter(el => el.getAttribute(Settings.Attribute.GROUP) === groupId));\n        groupIds.push(groupId);\n      }\n    } else {\n      single.push(item);\n    }\n  });\n\n  const singleInstances =\n    single.map(trigger => new ExpandableItem(trigger.getAttribute(Settings.Attribute.TRIGGER)));\n  const groupInstances = groups.map((grouping) => {\n    if (grouping.some(item => item.hasAttribute(Settings.Attribute.ANIMATED))) {\n      return new ExpandableAccordion(grouping);\n    }\n    return new ExpandableGroup(grouping);\n  });\n\n  return singleInstances.concat(groupInstances);\n}\n\nexport { default as Settings } from './settings';\nexport { default as ExpandableItem } from './expandable-item';\nexport { default as ExpandableGroup } from './expandable-group';\nexport { default as ExpandableAccordion } from './expandable-accordion';\n"],"names":["ExpandableItem","id","options","Object","assign","Settings","Defaults","trigger","document","body","querySelector","Attribute","TRIGGER","target","TARGET","_setA11yAttributes","groupedItem","_onTriggerClick","_triggerClickHandler","bind","addEventListener","evt","preventDefault","closest","toggle","elementId","setAttribute","isOpen","toString","_removeA11yAttributes","removeAttribute","close","open","classList","add","ClassName","TARGET_OPEN","TRIGGER_OPEN","remove","dispose","removeEventListener","contains","ExpandableGroup","elements","_elements","expandables","map","getAttribute","_onClick","_onClickHandler","includes","toggleVisibility","selectedId","forEach","expandable","item","ExpandableAccordion","_expandableOffsets","_saveOffsets","_setHeight","_resizeId","OdoWindowEvents","onResize","_handleResize","_scrollToSelected","_animateHeight","scrollY","window","pageYOffset","containerOffset","getBoundingClientRect","top","el","i","offset","firstElementChild","offsetHeight","targetId","viewportTop","viewportBottom","innerHeight","find","itemOffset","isOutOfView","setToOpen","contentHeight","style","height","isTarget","initializeAll","Array","from","querySelectorAll","single","groups","groupIds","groupId","GROUP","push","filter","singleInstances","groupInstances","grouping","some","hasAttribute","ANIMATED","concat"],"mappings":";;;;;;;;AAAA,eAAe;aACF;kBACK,+BADL;iBAEI;GAHF;aAKF;aACA,yBADA;YAED,wBAFC;WAGF,uBAHE;cAIC;GATC;YAWH;iBACK;;CAZjB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAA;;;;;;AAMA,IAEMA;0BACQC,EAAZ,EAA8B;QAAdC,OAAc,uEAAJ,EAAI;;;;SAEvBD,EAAL,GAAUA,EAAV;;;;;;SAMKC,OAAL,GAAeC,OAAOC,MAAP,CAAc,EAAd,EAAkBC,SAASC,QAA3B,EAAqCJ,OAArC,CAAf;;;SAGKK,OAAL,GAAeC,SAASC,IAAT,CAAcC,aAAd,OAAgCL,SAASM,SAAT,CAAmBC,OAAnD,UAA+DX,EAA/D,QAAf;;;SAGKY,MAAL,GAAcL,SAASC,IAAT,CAAcC,aAAd,OAAgCL,SAASM,SAAT,CAAmBG,MAAnD,UAA8Db,EAA9D,QAAd;;SAEKc,kBAAL;;QAEI,CAAC,KAAKb,OAAL,CAAac,WAAlB,EAA+B;WACxBC,eAAL,GAAuB,KAAKC,oBAAL,CAA0BC,IAA1B,CAA+B,IAA/B,CAAvB;eACSV,IAAT,CAAcW,gBAAd,CAA+B,OAA/B,EAAwC,KAAKH,eAA7C;;;;;;;;;;;2BASJC,qDAAqBG,KAAK;QACpBC,cAAJ;QACMC,UAAUF,IAAIR,MAAJ,CAAWU,OAAX,OAAuBlB,SAASM,SAAT,CAAmBC,OAA1C,OAAhB;;QAEIW,YAAY,KAAKhB,OAArB,EAA8B;WACvBiB,MAAL;;;;;;;;;;2BAQJT,mDAAqB;QACbU,4BAA0B,KAAKxB,EAArC;;SAEKM,OAAL,CAAamB,YAAb,CAA0B,kBAA1B,EAA8CD,SAA9C;SACKZ,MAAL,CAAYa,YAAZ,CAAyB,IAAzB,EAA+BD,SAA/B;SACKlB,OAAL,CAAamB,YAAb,CAA0B,eAA1B,EAA2C,KAAKC,MAAL,CAAYC,QAAZ,EAA3C;SACKrB,OAAL,CAAamB,YAAb,CAA0B,eAA1B,EAA2CD,SAA3C;SACKZ,MAAL,CAAYa,YAAZ,CAAyB,iBAAzB,EAA4CD,SAA5C;SACKZ,MAAL,CAAYa,YAAZ,CAAyB,aAAzB,EAAwC,CAAC,CAAC,KAAKC,MAAP,EAAeC,QAAf,EAAxC;;;;;;;;;2BAOFC,yDAAwB;SACjBtB,OAAL,CAAauB,eAAb,CAA6B,kBAA7B;SACKjB,MAAL,CAAYiB,eAAZ,CAA4B,IAA5B;SACKvB,OAAL,CAAauB,eAAb,CAA6B,eAA7B;SACKjB,MAAL,CAAYiB,eAAZ,CAA4B,iBAA5B;SACKjB,MAAL,CAAYiB,eAAZ,CAA4B,aAA5B;;;;;;;;2BAMFN,2BAAS;QACH,KAAKG,MAAT,EAAiB;WACVI,KAAL;KADF,MAEO;WACAC,IAAL;;;;;;;;;2BAOJA,uBAAO;SACAnB,MAAL,CAAYoB,SAAZ,CAAsBC,GAAtB,CAA0B7B,SAAS8B,SAAT,CAAmBC,WAA7C;SACK7B,OAAL,CAAa0B,SAAb,CAAuBC,GAAvB,CAA2B7B,SAAS8B,SAAT,CAAmBE,YAA9C;SACK9B,OAAL,CAAamB,YAAb,CAA0B,eAA1B,EAA2C,MAA3C;SACKb,MAAL,CAAYa,YAAZ,CAAyB,aAAzB,EAAwC,OAAxC;;;;;;;;2BAMFK,yBAAQ;SACDlB,MAAL,CAAYoB,SAAZ,CAAsBK,MAAtB,CAA6BjC,SAAS8B,SAAT,CAAmBC,WAAhD;SACK7B,OAAL,CAAa0B,SAAb,CAAuBK,MAAvB,CAA8BjC,SAAS8B,SAAT,CAAmBE,YAAjD;SACK9B,OAAL,CAAamB,YAAb,CAA0B,eAA1B,EAA2C,OAA3C;SACKb,MAAL,CAAYa,YAAZ,CAAyB,aAAzB,EAAwC,MAAxC;;;;;;2BAUFa,6BAAU;QACJ,CAAC,KAAKrC,OAAL,CAAac,WAAlB,EAA+B;eACpBP,IAAT,CAAc+B,mBAAd,CAAkC,OAAlC,EAA2C,KAAKvB,eAAhD;;;SAGGY,qBAAL;;;;;2BAZW;aACJ,KAAKhB,MAAL,CAAYoB,SAAZ,CAAsBQ,QAAtB,CAA+BpC,SAAS8B,SAAT,CAAmBC,WAAlD,CAAP;;;;;;AAeJjC,OAAOC,MAAP,CAAcJ,cAAd,EAA8BK,QAA9B;;ACzHA;;;;;;AAMA,IAGMqC;2BACQC,QAAZ,EAAsB;;;;SAEfC,SAAL,GAAiBD,QAAjB;;;;;;SAMKE,WAAL,GAAmBF,SAASG,GAAT,CAAa;aAAW,IAAI9C,cAAJ,CACzCO,QAAQwC,YAAR,CAAqB1C,SAASM,SAAT,CAAmBC,OAAxC,CADyC,EAEzC,EAAEI,aAAa,IAAf,EAFyC,CAAX;KAAb,CAAnB;;SAKKgC,QAAL,GAAgB,KAAKC,eAAL,CAAqB9B,IAArB,CAA0B,IAA1B,CAAhB;aACSV,IAAT,CAAcW,gBAAd,CAA+B,OAA/B,EAAwC,KAAK4B,QAA7C;;;;;;;;;;4BAQFC,2CAAgB5B,KAAK;QACfC,cAAJ;QACMC,UAAUF,IAAIR,MAAJ,CAAWU,OAAX,OAAuBlB,SAASM,SAAT,CAAmBC,OAA1C,OAAhB;;QAEI,KAAKgC,SAAL,CAAeM,QAAf,CAAwB3B,OAAxB,CAAJ,EAAsC;WAC/B4B,gBAAL,CAAsB5B,QAAQwB,YAAR,CAAqB1C,SAASM,SAAT,CAAmBC,OAAxC,CAAtB;;;;;;;;;;;4BASJuC,6CAAiBC,YAAY;SACtBP,WAAL,CAAiBQ,OAAjB,CAAyB,UAACC,UAAD,EAAgB;UACnCA,WAAWrD,EAAX,KAAkBmD,UAAtB,EAAkC;mBACrB5B,MAAX;OADF,MAEO;mBACMO,KAAX;;KAJJ;;;;;;;;;;4BAcFQ,6BAAU;aACC9B,IAAT,CAAc+B,mBAAd,CAAkC,OAAlC,EAA2C,KAAKvB,eAAhD;SACK4B,WAAL,CAAiBQ,OAAjB,CAAyB;aAAQE,KAAKhB,OAAL,EAAR;KAAzB;;;;;;AAIJpC,OAAOC,MAAP,CAAcsC,eAAd,EAA+BrC,QAA/B;;ACnEA;;;;;;AAMA,IAIMmD;;;+BACQb,QAAZ,EAAsB;;;;;;gDACpB,4BAAMA,QAAN,CADoB;;UAMfc,kBAAL,GAA0B,IAA1B;;UAEKC,YAAL;;;UAGKb,WAAL,CAAiBQ,OAAjB,CAAyB;aAAQ,MAAKM,UAAL,CAAgBJ,IAAhB,EAAsBA,KAAK5B,MAA3B,CAAR;KAAzB;;;UAGKiC,SAAL,GAAiBC,gBAAgBC,QAAhB,CAAyB,MAAKC,aAAL,CAAmB5C,IAAnB,OAAzB,CAAjB;;;;;;;;;;;;gCASF4C,yCAAgB;;;SACTL,YAAL;SACKb,WAAL,CAAiBQ,OAAjB,CAAyB;aAAQ,OAAKM,UAAL,CAAgBJ,IAAhB,EAAsBA,KAAK5B,MAA3B,CAAR;KAAzB;;;;;;;;;;gCAQFwB,6CAAiBC,YAAY;;;SACtBY,iBAAL,CAAuBZ,UAAvB;SACKP,WAAL,CAAiBQ,OAAjB,CAAyB;aAAQ,OAAKY,cAAL,CAAoBV,IAApB,EAA0BA,KAAKtD,EAAL,KAAYmD,UAAtC,CAAR;KAAzB;+BACMD,gBAAN,YAAuBC,UAAvB;;;;;;;;;;;gCASFM,uCAAe;QACPQ,UAAUC,OAAOC,WAAvB;QACMC,kBAAkBH,UAAU,KAAKrB,WAAL,CAAiB,CAAjB,EAAoBtC,OAApB,CAA4B+D,qBAA5B,GAAoDC,GAAtF;SACKd,kBAAL,GAA0B,KAAKZ,WAAL,CAAiBC,GAAjB,CAAqB,UAAC0B,EAAD,EAAKC,CAAL,EAAW;UAClDC,SAASL,kBAAmBI,IAAID,GAAG3D,MAAH,CAAU8D,iBAAV,CAA4BC,YAAlE;aACO,EAAE3E,IAAIuE,GAAGvE,EAAT,EAAayE,cAAb,EAAP;KAFwB,CAA1B;;;;;;;;;;;;gCAaFV,+CAAkBa,UAAU;QACpBC,cAAcX,OAAOC,WAA3B;QACMW,iBAAiBD,cAAcX,OAAOa,WAA5C;QACMzB,OAAO,KAAKE,kBAAL,CAAwBwB,IAAxB,CAA6B;aAAQ1B,KAAKtD,EAAL,KAAY4E,QAApB;KAA7B,CAAb;QACMK,aAAa3B,KAAKmB,MAAxB;QACMS,cAAcD,aAAaJ,WAAb,IAA4BI,aAAaH,cAA7D;QACII,WAAJ,EAAiB;0BACND,UAAT,EAAqB,GAArB;;;;;;;;;;;;gCAUJvB,iCAAWL,YAAY8B,WAAW;QAC1BC,gBAAgBD,YAAY9B,WAAWzC,MAAX,CAAkB8D,iBAAlB,CAAoCC,YAAhD,GAA+D,CAArF;eACW/D,MAAX,CAAkByE,KAAlB,CAAwBC,MAAxB,GAAoCF,aAApC;;;;;;;;;;;;;gCAWFpB,yCAAeX,YAAYkC,UAAU;QAC/BA,YAAYlC,WAAW3B,MAA3B,EAAmC;WAC5BgC,UAAL,CAAgBL,UAAhB,EAA4B,CAACA,WAAW3B,MAAxC;;;;;;;;;;;gCASJY,6BAAU;+BACFA,OAAN;oBACgBD,MAAhB,CAAuB,KAAKsB,SAA5B;;;;EAzG8BlB;;ACLlC;;;;;;;;AAQA,AAAO,SAAS+C,aAAT,GAAyB;MACxB9C,WAAW+C,MAAMC,IAAN,CAAWnF,SAASoF,gBAAT,OAA8BvF,SAASM,SAAT,CAAmBC,OAAjD,OAAX,CAAjB;;MAEMiF,SAAS,EAAf;MACMC,SAAS,EAAf;MACMC,WAAW,EAAjB;;WAES1C,OAAT,CAAiB,UAACE,IAAD,EAAU;QACnByC,UAAUzC,KAAKR,YAAL,CAAkB1C,SAASM,SAAT,CAAmBsF,KAArC,CAAhB;QACID,OAAJ,EAAa;UACP,CAACD,SAAS7C,QAAT,CAAkB8C,OAAlB,CAAL,EAAiC;eACxBE,IAAP,CAAYvD,SAASwD,MAAT,CAAgB;iBAAM3B,GAAGzB,YAAH,CAAgB1C,SAASM,SAAT,CAAmBsF,KAAnC,MAA8CD,OAApD;SAAhB,CAAZ;iBACSE,IAAT,CAAcF,OAAd;;KAHJ,MAKO;aACEE,IAAP,CAAY3C,IAAZ;;GARJ;;MAYM6C,kBACJP,OAAO/C,GAAP,CAAW;WAAW,IAAI9C,cAAJ,CAAmBO,QAAQwC,YAAR,CAAqB1C,SAASM,SAAT,CAAmBC,OAAxC,CAAnB,CAAX;GAAX,CADF;MAEMyF,iBAAiBP,OAAOhD,GAAP,CAAW,UAACwD,QAAD,EAAc;QAC1CA,SAASC,IAAT,CAAc;aAAQhD,KAAKiD,YAAL,CAAkBnG,SAASM,SAAT,CAAmB8F,QAArC,CAAR;KAAd,CAAJ,EAA2E;aAClE,IAAIjD,mBAAJ,CAAwB8C,QAAxB,CAAP;;WAEK,IAAI5D,eAAJ,CAAoB4D,QAApB,CAAP;GAJqB,CAAvB;;SAOOF,gBAAgBM,MAAhB,CAAuBL,cAAvB,CAAP;;;;;;;;;;;;;;;;;"}